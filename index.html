<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="LumaFood" />
  <title>LumaFood</title>

  <!-- Perf: remove render-blocking @import + preconnect fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400;1,600&family=Fredoka:wght@400;500;600;700&display=swap">

  <!-- Perf: preload likely LCP image (no new files required) -->
  <link rel="preload" as="image" href="assets/images/home/hero-bread.webp" fetchpriority="high">

  <style>
    :root{
      --font-body: "Plus Jakarta Sans", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      --font-display: "Fredoka", "Plus Jakarta Sans", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      --bg:#ba5b58;
      --text:#aba3f1;
      --text-weak: rgba(171,163,241,.82);
      --panel: rgba(0,0,0,.14);
      --panel2: rgba(255,255,255,.08);
      --line: rgba(171,163,241,.22);
      --shadow: 0 20px 70px rgba(0,0,0,.35);
      --radius: 22px;
      --max-wide: 1600px;
      --max-narrow: 1120px;
      --pad: clamp(14px, 2.2vw, 28px);
    }

    *{box-sizing:border-box}
    html,body{
      margin:0;
      font-family: var(--font-body);
      background:
        radial-gradient(900px 700px at 20% -10%, rgba(245,228,130,.35), transparent 60%),
        radial-gradient(900px 700px at 80% 10%, rgba(49,112,78,.35), transparent 60%),
        linear-gradient(180deg, rgba(171,163,241,.12), rgba(186,91,88,.45)),
        var(--bg);
      color: var(--text);
      overflow-x:hidden;
    }

    a{color:inherit; text-decoration:none}
    button{font-family:inherit}
    img{max-width:100%; height:auto}

    .wrap{width:100%; margin:0 auto; padding:var(--pad)}
    .wrap-wide{max-width:var(--max-wide)}
    .wrap-narrow{max-width:var(--max-narrow)}

    /* Header */
    .topbar{
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(14px);
      background:
        linear-gradient(180deg, rgba(186,91,88,.88), rgba(186,91,88,.35)),
        radial-gradient(600px 200px at 50% 0%, rgba(245,228,130,.25), transparent 70%);
      border-bottom: 1px solid rgba(171,163,241,.16);
    }

    .topbar-inner{
      width:100%;
      max-width: var(--max-wide);
      margin:0 auto;
      padding: 6px var(--pad);
      display:grid;
      grid-template-columns: 60px 1fr 60px;
      align-items:center;
      gap: 8px;
    }

    /* Bigger + more accented hamburger */
    .hamburger{
      width:52px; height:52px;
      border-radius: 999px;
      border: 1px solid rgba(171,163,241,.34);
      background:
        radial-gradient(18px 18px at 30% 25%, rgba(245,228,130,.55), transparent 60%),
        radial-gradient(22px 22px at 70% 75%, rgba(49,112,78,.55), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.16), rgba(0,0,0,.16));
      box-shadow:
        0 18px 46px rgba(0,0,0,.32),
        0 0 0 6px rgba(171,163,241,.10);
      display:grid; place-items:center;
      cursor:pointer;
      transition: transform .15s ease, filter .15s ease;
    }
    .hamburger:hover{filter: brightness(1.06)}
    .hamburger:active{transform: translateY(1px)}
    .hamburger:focus-visible{
      outline:none;
      box-shadow:
        0 18px 46px rgba(0,0,0,.32),
        0 0 0 4px rgba(245,228,130,.45),
        0 0 0 8px rgba(171,163,241,.12);
    }

    .burger{
      width:22px;
      height:16px;
      position:relative;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
    }
    .burger span{
      height:2px;
      border-radius:999px;
      background: rgba(255,255,255,.92);
      box-shadow: 0 1px 0 rgba(0,0,0,.25);
    }

    .logo{display:flex; justify-content:center; align-items:center; pointer-events:auto}
    .logo img{
      height: 84px;
      width:auto;
      display:block;
      filter: drop-shadow(0 10px 22px rgba(0,0,0,.22));
    }

    .topbar-spacer{width:60px; height:60px}

    /* Side panel */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.40);
      backdrop-filter: blur(6px);
      z-index: 60;
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease;
    }
    .overlay.show{opacity:1; pointer-events:auto}

    .sidePanel{
      position:fixed;
      top: 14px;
      left: 14px;
      bottom: 14px;
      width: min(360px, calc(100vw - 28px));
      border-radius: 26px;
      background:
        radial-gradient(900px 600px at 0% 0%, rgba(171,163,241,.20), transparent 55%),
        linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.08));
      border: 1px solid rgba(171,163,241,.16);
      box-shadow: var(--shadow);
      z-index: 70;
      transform: translateX(-110%);
      transition: transform .22s ease;
      padding: 16px;
      display:flex;
      flex-direction:column;
      gap: 14px;
      will-change: transform;
    }
    .sidePanel.open{transform: translateX(0)}

    .panelTop{display:flex; justify-content:space-between; align-items:center; gap:10px}
    .panelLogo{display:flex; align-items:center; gap:12px}
    .panelLogo img{height:34px; width:auto; display:block}

    .closeBtn{
      width:44px; height:44px;
      border-radius: 999px;
      border: 1px solid rgba(171,163,241,.22);
      background: rgba(0,0,0,.12);
      cursor:pointer;
      display:grid; place-items:center;
    }
    .closeBtn svg{width:18px; height:18px}

    .nav{display:flex; flex-direction:column; gap:10px; margin-top:6px}
    .nav a{
      border: 1px solid rgba(171,163,241,.18);
      background: rgba(255,255,255,.06);
      border-radius: 999px;
      padding: 10px 12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-weight: 600;
      letter-spacing: .02em;
    }
    .nav a:hover{background: rgba(255,255,255,.09)}

    .nav a .dot{
      width:10px; height:10px; border-radius:999px;
      background: rgba(171,163,241,.75);
      box-shadow: 0 0 0 6px rgba(171,163,241,.10);
    }

    .panelBottom{margin-top:auto; display:flex; gap:10px; flex-wrap:wrap}

    .iconBtn{
      width:44px; height:44px;
      border-radius: 999px;
      border: 1px solid rgba(171,163,241,.18);
      background: rgba(0,0,0,.10);
      display:grid; place-items:center;
    }
    .iconBtn:hover{background: rgba(0,0,0,.16)}
    .iconBtn svg{width:18px; height:18px}

    /* Layout */
    main{min-height: calc(100vh - 64px)}
    .hero{padding: 18px 0 10px}

    .accent-matcha{color:#31704e}
    .accent-protein{color:#fa2239}

    .hero h1{
      font-family: var(--font-display);
      margin: 0;
      font-size: clamp(34px, 4.7vw, 70px);
      line-height: 1.02;
      letter-spacing: -0.02em;
      text-align:left;
      text-wrap: balance;
    }

    .hero p{
      margin: 14px 0 0;
      max-width: 980px;
      font-size: clamp(16px, 2.0vw, 22px);
      line-height: 1.35;
      color: var(--text-weak);
    }

    .softPanel{
      margin-top: 18px;
      border-radius: var(--radius);
      border: 1px solid rgba(171,163,241,.14);
      background:
        radial-gradient(1400px 800px at 0% 0%, rgba(171,163,241,.45), transparent 55%),
        radial-gradient(1200px 700px at 100% 0%, rgba(245,228,130,.25), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.10));
      box-shadow: 0 24px 80px rgba(0,0,0,.35);
      overflow:hidden;
    }

    /* Home carousel */
    .carousel{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      padding: 24px;
    }
    .card{
      min-width: 0;
      border-radius: 26px;
      background:
        radial-gradient(120% 120% at 10% 10%, rgba(255,255,255,.18), transparent 45%),
        radial-gradient(120% 120% at 90% 90%, rgba(0,0,0,.35), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.28));
      border: 1px solid rgba(171,163,241,.14);
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }

    .cardMedia{
      height: clamp(320px, 32vw, 620px);
      padding: 0;
      display:flex;
      align-items:stretch;
      justify-content:stretch;
    }
    .cardMedia img{
      width:100%;
      height:100%;
      object-fit: cover;
      object-position: center;
      display:block;
    }

    .card .ctaRow{
      padding: 14px 14px 16px;
      display:flex;
      justify-content:center;
      align-items:center;
      border-top: 1px solid rgba(171,163,241,.12);
      background: rgba(0,0,0,.08);
    }

    .btn{
      font-family: var(--font-display);
      border: 1px solid rgba(171,163,241,.28);
      background: rgba(255,255,255,.10);
      color: var(--text);
      padding: 14px 22px;
      border-radius: 999px;
      font-weight: 800;
      letter-spacing: .08em;
      text-transform: uppercase;
      font-size: 14px;
      cursor:pointer;
      transition: transform .15s ease, filter .15s ease, background .15s ease, box-shadow .15s ease;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
    }
    .btn:hover{background: rgba(255,255,255,.14); filter: brightness(1.02)}
    .btn:active{transform: translateY(1px)}

    /* ✅ HOME CTA ACCENT (purple gradient) */
    .btn-cta{
      border: 1px solid rgba(171,163,241,.42);
      background:
        radial-gradient(120% 140% at 20% 0%, rgba(255,255,255,.22), transparent 42%),
        linear-gradient(135deg, rgba(171,163,241,.95), rgba(120,92,255,.78));
      color: #0b0d10;
      box-shadow:
        0 16px 42px rgba(0,0,0,.34),
        0 0 0 6px rgba(171,163,241,.14);
    }
    .btn-cta:hover{
      filter: brightness(1.06);
      box-shadow:
        0 20px 58px rgba(0,0,0,.42),
        0 0 0 8px rgba(171,163,241,.18);
      background:
        radial-gradient(120% 140% at 20% 0%, rgba(255,255,255,.24), transparent 45%),
        linear-gradient(135deg, rgba(186,178,255,.98), rgba(120,92,255,.86));
    }
    .btn-cta:active{
      transform: translateY(1px);
      filter: brightness(1.02);
    }

    /* Contact-only Send button (kept for consistency across site styles) */
    .btn-send{
      border: none;
      background: linear-gradient(135deg, #31704e, #4c9a6a);
      color: #fff;
      padding: 13px 20px;
      border-radius: 16px;
      box-shadow: 0 12px 28px rgba(0,0,0,.28);
    }

    /* Marquee banner (continuous) */
    .marquee{width:100%; overflow:hidden; background:#000; border-top:1px solid rgba(255,255,255,.14); border-bottom:1px solid rgba(255,255,255,.14)}
    .marquee-inner{display:flex; width:max-content}
    .marquee-track{
      display:flex;
      flex-wrap:nowrap;
      gap:96px;
      white-space:nowrap;
      padding:14px 0;
      will-change:transform;
      animation: marquee 36s linear infinite;
      font-family: var(--font-display);
      font-weight: 800;
      font-size: clamp(18px, 1.8vw, 22px);
      letter-spacing:.18em;
      text-transform:uppercase;
      color:#fff;
    }
    .marquee-track span{flex:0 0 auto; display:inline-block;}
    @keyframes marquee{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}

    /* Newsletter */
    .newsletter{padding: 48px 0 36px}
    .newsletter-box{
      border-radius: 28px;
      border: 1px solid rgba(171,163,241,.18);
      background:
        radial-gradient(700px 420px at 0% 0%, rgba(171,163,241,.22), transparent 55%),
        linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.08));
      padding: 28px;
      box-shadow: 0 20px 60px rgba(0,0,0,.28);
      text-align:center;
    }
    .newsletter-box h2{
      font-family:"Baloo 2","Plus Jakarta Sans",system-ui;
      margin:0 0 8px;
      font-size: clamp(26px, 3vw, 36px);
    }
    .newsletter-box p{margin:0 0 18px; color: var(--text-weak)}

    .newsletter-form{display:flex; gap:12px; justify-content:center; flex-wrap:wrap;}
    .newsletter-form input{
      min-width: 240px;
      flex:1 1 260px;
      border-radius: 999px;
      border: 1px solid rgba(171,163,241,.22);
      background: rgba(0,0,0,.12);
      padding: 14px 18px;
      font-size: 16px;
      color: var(--text);
      outline:none;
    }
    .newsletter-form input::placeholder{color: rgba(171,163,241,.55)}

    .newsletter-msg{flex: 1 1 100%; font-size: 14px; color: var(--text-weak); margin-top: 4px}
    .newsletter-msg.ok{color:#f5e482}
    .newsletter-msg.err{color:#ff0f39}

    /* Footer */
    footer{padding: 22px 0 34px; border-top: 1px solid rgba(171,163,241,.12); background: linear-gradient(to top, rgba(0,0,0,.18), rgba(0,0,0,0))}

    .footerInner{
      width:100%;
      max-width: var(--max-wide);
      margin: 0 auto;
      padding: 0 var(--pad);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
      flex-wrap:wrap;
    }

    .footerLinks{display:flex; gap: 12px; flex-wrap:wrap; font-weight: 600; color: rgba(171,163,241,.86)}

    .footerLinks a{padding: 8px 12px; border-radius: 999px; border: 1px solid rgba(171,163,241,.14); background: rgba(0,0,0,.10)}
    .footerLinks a:hover{background: rgba(0,0,0,.16)}

    /* Responsive */
    @media (max-width: 720px){
      .topbar-inner{grid-template-columns: 60px 1fr 0px}
      .topbar-spacer{display:none}

      /* Make side panel fit nicer on small screens */
      .sidePanel{
        top: 10px;
        left: 10px;
        right: 10px;
        bottom: 10px;
        width: auto;
      }

      .carousel{padding: 14px; gap: 14px}
      .cardMedia{height: clamp(280px, 78vw, 560px)}
    }

    @media (min-width: 980px){
      .carousel.home{grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 18px; padding: 18px}
    }

    @media (prefers-reduced-motion: reduce){
      *{scroll-behavior:auto !important; transition:none !important}
    }
  </style>
</head>
<body>

  <header class="topbar">
    <div class="topbar-inner">
      <button class="hamburger" id="menuBtn" aria-label="Open menu" aria-expanded="false">
        <div class="burger" aria-hidden="true">
          <span></span><span></span><span></span>
        </div>
      </button>

      <a class="logo" href="./" aria-label="Home">
        <img src="logo.webp" alt="Luma" />
      </a>

      <div class="topbar-spacer" aria-hidden="true"></div>
    </div>
  </header>

  <div class="overlay" id="overlay" aria-hidden="true"></div>

  <aside class="sidePanel" id="sidePanel" aria-label="Menu panel">
    <div class="panelTop">
      <div class="panelLogo">
        <img src="logo.webp" alt="Luma" />
      </div>
      <button class="closeBtn" id="closeBtn" aria-label="Close menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M18 6 6 18" />
          <path d="M6 6 18 18" />
        </svg>
      </button>
    </div>

    <nav class="nav" aria-label="Primary">
      <a href="./"><span>Home</span><span class="dot" aria-hidden="true"></span></a>
      <a href="./products/"><span>Products</span><span class="dot" aria-hidden="true"></span></a>
      <a href="./about/"><span>About</span><span class="dot" aria-hidden="true"></span></a>
      <a href="./contact/"><span>Contact</span><span class="dot" aria-hidden="true"></span></a>
      <a href="./blog/"><span>Blog</span><span class="dot" aria-hidden="true"></span></a>
    </nav>

    <div class="panelBottom" aria-label="Social">
      <a class="iconBtn" href="https://lumafood.com/m.me/886409911227941" aria-label="Messenger">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M21 11.5a8.5 8.5 0 0 1-12.7 7.4L3 21l1.7-5.3A8.5 8.5 0 1 1 21 11.5Z"/>
        </svg>
      </a>
      <a class="iconBtn" href="https://instagram.com/lumafoodnz" aria-label="Instagram">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <rect x="3" y="3" width="18" height="18" rx="5"/>
          <circle cx="12" cy="12" r="4"/>
          <path d="M17.5 6.5h.01"/>
        </svg>
      </a>
      <a class="iconBtn" href="#" aria-label="TikTok">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M14 3v11a4 4 0 1 1-4-4"/>
          <path d="M14 7a6 6 0 0 0 6 6"/>
        </svg>
      </a>
      <a class="iconBtn" href="https://wa.me/+4915212111139" aria-label="WhatsApp">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M21 12a8.9 8.9 0 0 1-13.6 7.6L3 21l1.5-4.2A9 9 0 1 1 21 12Z"/>
          <path d="M8.5 8.5c.5 4 3 6.5 7 7"/>
        </svg>
      </a>
    </div>
  </aside>

  <main>
    <!-- HOME ONLY -->
    <section>
      <div class="wrap wrap-wide">
        <div class="hero">
          <h1>High Protein Bread, <span class="accent-matcha">Matcha Soda</span> and <span class="accent-protein">Protein Ice Tea.</span></h1>
          <p>We're on a mission to create food and drinks using wholefoods and healthy ingredients. Functional products for busy people.</p>
        </div>

        <div class="softPanel" aria-label="Featured products">
          <div class="carousel home">
            <article class="card">
              <div class="cardMedia">
                <img loading="eager" decoding="async" fetchpriority="high" alt="Luma high protein bread" src="assets/images/home/hero-bread.webp" />
              </div>
              <div class="ctaRow"><a class="btn btn-cta" href="./products/">Order Protein Bread</a></div>
            </article>
            <article class="card">
              <div class="cardMedia">
                <img loading="lazy" decoding="async" alt="Luma matcha soda" src="assets/images/home/hero-matcha.webp" />
              </div>
              <div class="ctaRow"><a class="btn btn-cta" href="./products/">Order Matcha Soda</a></div>
            </article>
            <article class="card">
              <div class="cardMedia">
                <img loading="lazy" decoding="async" alt="Luma protein ice tea" src="assets/images/home/hero-ice-tea.webp" />
              </div>
              <div class="ctaRow"><a class="btn btn-cta" href="./products/">Order Protein Ice Tea</a></div>
            </article>
          </div>
        </div>
      </div>

      <div class="marquee" aria-hidden="true">
        <div class="marquee-inner">
          <div class="marquee-track">
            <span>Enjoy life healthy</span><span>Enjoy life healthy</span><span>Enjoy life healthy</span><span>Enjoy life healthy</span>
            <span>Enjoy life healthy</span><span>Enjoy life healthy</span><span>Enjoy life healthy</span><span>Enjoy life healthy</span>
          </div>
          <div class="marquee-track" aria-hidden="true">
            <span>Enjoy life healthy</span><span>Enjoy life healthy</span><span>Enjoy life healthy</span><span>Enjoy life healthy</span>
            <span>Enjoy life healthy</span><span>Enjoy life healthy</span><span>Enjoy life healthy</span><span>Enjoy life healthy</span>
          </div>
        </div>
      </div>

      <section class="newsletter">
        <div class="wrap wrap-narrow">
          <div class="newsletter-box">
            <h2>Join the Luma list</h2>
            <p>New products, early drops, and functional food ideas. No spam.</p>
            <form class="newsletter-form" action="https://api.web3forms.com/submit" method="POST">
              <input type="hidden" name="access_key" value="82bdae8a-79ae-4e1a-a927-596d378240e1" />
              <input type="hidden" name="subject" value="New Luma Newsletter Signup" />
              <input type="hidden" name="from_name" value="LumaFood" />
              <input type="hidden" name="redirect" value="false" />
              <input type="checkbox" name="botcheck" class="hidden" style="display:none">
              <input type="email" name="email" required placeholder="Your email" />
              <div class="newsletter-msg" aria-live="polite"></div>
              <button class="btn btn-send" type="submit">Subscribe</button>
            </form>
          </div>
        </div>
      </section>
    </section>
  </main>

  <footer>
    <div class="footerInner">
      <div class="footerLinks" aria-label="Footer links">
        <a href="./terms/">TOS</a>
        <a href="./returns/">Returns</a>
        <a href="./privacy/">Privacy</a>
        <a href="./blog/">Blog</a>
      </div>

      <div class="panelBottom" aria-label="Footer social">
        <a class="iconBtn" href="https://lumafood.com/m.me/886409911227941" aria-label="Messenger">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M21 11.5a8.5 8.5 0 0 1-12.7 7.4L3 21l1.7-5.3A8.5 8.5 0 1 1 21 11.5Z"/>
          </svg>
        </a>
        <a class="iconBtn" href="https://instagram.com/lumafoodnz" aria-label="Instagram">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <rect x="3" y="3" width="18" height="18" rx="5"/>
            <circle cx="12" cy="12" r="4"/>
            <path d="M17.5 6.5h.01"/>
          </svg>
        </a>
        <a class="iconBtn" href="#" aria-label="TikTok">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M14 3v11a4 4 0 1 1-4-4"/>
            <path d="M14 7a6 6 0 0 0 6 6"/>
          </svg>
        </a>
        <a class="iconBtn" href="https://wa.me/+4915212111139" aria-label="WhatsApp">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M21 12a8.9 8.9 0 0 1-13.6 7.6L3 21l1.5-4.2A9 9 0 1 1 21 12Z"/>
            <path d="M8.5 8.5c.5 4 3 6.5 7 7"/>
          </svg>
        </a>
      </div>
    </div>
  </footer>

  <script>
    const overlay = document.getElementById('overlay');
    const sidePanel = document.getElementById('sidePanel');
    const menuBtn = document.getElementById('menuBtn');
    const closeBtn = document.getElementById('closeBtn');

    function openPanel(){
      overlay.classList.add('show');
      sidePanel.classList.add('open');
      menuBtn?.setAttribute('aria-expanded', 'true');
      overlay?.setAttribute('aria-hidden', 'false');
    }
    function closePanel(){
      overlay.classList.remove('show');
      sidePanel.classList.remove('open');
      menuBtn?.setAttribute('aria-expanded', 'false');
      overlay?.setAttribute('aria-hidden', 'true');
    }

    menuBtn?.addEventListener('click', () => {
      const isOpen = sidePanel.classList.contains('open');
      if(isOpen) closePanel(); else openPanel();
    });

    closeBtn?.addEventListener('click', closePanel);
    overlay?.addEventListener('click', closePanel);

    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closePanel();
    });

    sidePanel?.addEventListener('click', (e) => {
      const a = e.target.closest('a');
      if (!a) return;
      closePanel();
    });
  </script>

  <script>
    // Newsletter (Web3Forms) – inline success/error handling (supports multiple forms)
    (function(){
      const forms = Array.from(document.querySelectorAll('.newsletter-form'));
      if(!forms.length) return;

      forms.forEach((form) => {
        const msg = form.querySelector('.newsletter-msg');
        if(!msg) return;

        form.addEventListener('submit', async (e) => {
          e.preventDefault();
          msg.textContent = '';
          msg.className = 'newsletter-msg';

          const fd = new FormData(form);
          try{
            const res = await fetch(form.action, { method:'POST', body: fd });
            const data = await res.json().catch(() => ({}));
            if(res.ok && (data.success === true || data.message)){
              msg.textContent = 'Thanks — you\'re on the list.';
              msg.classList.add('ok');
              form.reset();
            }else{
              msg.textContent = 'Hmm — that didn\'t work. Try again.';
              msg.classList.add('err');
            }
          }catch(err){
            msg.textContent = 'Network error — please try again.';
            msg.classList.add('err');
          }
        });
      });
    })();
  </script>
</body>
</html>
